package com.gl4.studentandroidappimport androidx.appcompat.app.AppCompatActivityimport android.os.Bundleimport android.text.Editableimport android.text.TextWatcherimport android.view.Viewimport android.widget.*import androidx.recyclerview.widget.LinearLayoutManagerimport androidx.recyclerview.widget.RecyclerViewimport com.gl4.studentandroidapp.Rimport com.gl4.studentandroidapp.enums.GenderEnumimport com.gl4.studentandroidapp.enums.StatusEnumimport com.gl4.studentandroidapp.models.Studentimport com.gl4.studentandroidapp.views.StudentListAdapterimport com.google.android.material.textfield.TextInputEditTextclass MainActivity : AppCompatActivity() {    val spinner: Spinner by lazy { findViewById(R.id.spinner) }    val searchBar: EditText by lazy { findViewById(R.id.searchBar) }    var k = 0;    val button: Button by lazy { findViewById(R.id.button) }    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        setContentView(R.layout.activity_main)        var matieres = listOf<String>("Cours", "TP")        var adapter = ArrayAdapter(applicationContext, R.layout.my_selected_item, matieres)        adapter.setDropDownViewResource(R.layout.my_dropdown_item)        var studentsCours = ArrayList<Student>(        )        var studentsTp = ArrayList<Student>(        )        for (i in 0..50) {            studentsCours.add(                Student(                    "Feriel $i", "Bouhamed", GenderEnum.female, StatusEnum.absent                )            )            studentsCours.add(Student("Med $i", "Boutaieb", GenderEnum.male, StatusEnum.present))            studentsTp.add(                Student(                    "Fawzia $i", "Ben moussa", GenderEnum.female, StatusEnum.present                )            )            studentsTp.add(Student("Samir $i", "Yousfi", GenderEnum.male, StatusEnum.absent))        }        var adapters = arrayListOf<StudentListAdapter>(            StudentListAdapter(studentsCours), StudentListAdapter(studentsTp)        )        var studentListAdapter: StudentListAdapter = adapters[0]        var filter = studentListAdapter.filter        var studentList = findViewById<View>(R.id.recyclerView) as RecyclerView        studentList.layoutManager = LinearLayoutManager(this)        spinner.adapter = adapter        spinner.onItemSelectedListener = object : AdapterView.OnItemSelectedListener {            override fun onItemSelected(                adapterView: AdapterView<*>?, view: View?, position: Int, id: Long            ) {                Toast.makeText(                    applicationContext,                    adapterView?.getItemAtPosition(position).toString(),                    Toast.LENGTH_SHORT                ).show();                studentListAdapter = adapters[position]                studentListAdapter.filterMode = k                studentList.adapter = studentListAdapter                filter = studentListAdapter.filter                filter.filter(searchBar.text)            }            override fun onNothingSelected(adapterView: AdapterView<*>?) {            }        }        searchBar.addTextChangedListener(object : TextWatcher {            override fun beforeTextChanged(p0: CharSequence?, p1: Int, p2: Int, p3: Int) {            }            override fun onTextChanged(p0: CharSequence?, p1: Int, p2: Int, p3: Int) {                filter.filter(p0)            }            override fun afterTextChanged(s: Editable?) {            }        })        button.setOnClickListener { view ->            k = (k + 1) % 3;            println(k)            if (view?.id == R.id.button) {                studentListAdapter.filterMode = k                studentList.adapter = studentListAdapter                filter = studentListAdapter.filter                filter.filter(searchBar.text)                if (k == 1) button.text = "FILTER:ABSENT"                else if (k == 2) button.text = "FILTER PRESENT"                else button.setText("NO FILTER")            }        }    }}